/*!
 * uu5g04 library with basic visual components
 * Copyright (C) 2021 Unicorn a.s.
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see Licenses - GNU Project <https://gnu.org/licenses/>.
 */
"use strict";(this.__webpack_jsonp_uu5g04_1_58_8_uu5g04_bricks=this.__webpack_jsonp_uu5g04_1_58_8_uu5g04_bricks||[]).push([[177],{5177:(e,t,o)=>{o.r(t),o.d(t,{CardEditable:()=>g,default:()=>v})
;var s=o(5032),n=o.n(s),i=o(4434),l=o.n(i),r=o(5082),a=o(6765),p=o(9321),c=o(664);const m={elevation:1,elevationHover:1,inline:!1,width:null,minWidth:null,noSpaces:!1,bgStyle:"filled",
borderRadius:null,header:"",footer:"",level:null},h=[a.al,{name:"width",type:"number",label:c.Z.card.widthLabel,getProps:(e,t)=>({step:50,min:0,suffix:"px",valueType:"number",disabled:!t.inline})},{
name:"minWidth",type:"number",label:c.Z.card.minWidthLabel,getProps:(e,t)=>({step:50,min:0,suffix:"px",valueType:"number",disabled:!t.inline})}],d=[{name:"noSpaces",type:"switchSelector",
label:c.Z.card.noSpacesLabel,getProps:()=>({items:[{content:Uu5g05.Utils.Element.create(l().Bricks.Lsi,{lsi:c.Z.common.valueFalse}),value:!1},{content:Uu5g05.Utils.Element.create(l().Bricks.Lsi,{
lsi:c.Z.common.valueTrue}),value:!0}],message:Uu5g05.Utils.Element.create(l().Bricks.Lsi,{lsi:c.Z.card.noSpacesMessage})})},{name:"elevation"},{name:"elevationHover",type:"elevation",
label:c.Z.card.elevationHoverLabel}],u=[{name:c.Z.common.componentPropsLabel,setup:[{name:"bgStyle"},{name:"colorSchema"},{name:"borderRadius"}]},{name:c.Z.card.inlinePropsLabel,setup:h},{
name:c.Z.card.elevationPropsLabel,setup:d}],g=l().Common.VisualComponent.create({mixins:[l().Common.BaseMixin],statics:{tagName:r.Z.name("CardEditable"),classNames:{main:r.Z.css("card-editable")},
lsi:()=>({...c.Z.card,...c.Z.common})},propTypes:{component:l().PropTypes.object.isRequired,renderView:l().PropTypes.func},getDefaultProps:()=>({component:null,renderView:void 0}),getInitialState(){
let e=this.props.component.getEditablePropsValues(Object.keys(m));return{...e,showFooter:!!e.footer,showHeader:!!e.header}},getPropsToSave(){return this._getPropsToSave()},_registerEditModal(e){
this._editModal=e},_onEndEditation(){this.props.component.endEditation(this._getPropsToSave())},_getPropsToSave(e=this.state){let{showFooter:t,showHeader:o,children:s,content:n,...i}=e
;for(let e in m)void 0!==i[e]&&i[e]===m[e]&&(i[e]=void 0);return o||(i.header=void 0),t||(i.footer=void 0),i},_changeColorSchema(e){this.setState({colorSchema:e.value},(()=>{
this.props.component.saveEditation({colorSchema:e.value&&"default"!==e.value?e.value:void 0})}))},_toggleHeader(e,t){this.setState((e=>({showHeader:!e.showHeader})),t)},_toggleFooter(e,t){
this.setState((e=>({showFooter:!e.showFooter})),t)},_toggleUnderline(){this.setState((e=>({underline:!e.underline})))},_changeLevel(e,t){this.setState({level:e},t)},_changeHeaderContent(e){
this.setState({header:e.value})},_changeFooterContent(e){this.setState({footer:e.value})},_getHeaderToolbarItems(){let e=[1,2,3,4,5,6].map((e=>({content:`${this.getLsiValue("level")} ${e}`,
value:`${e}`})));return e.unshift({content:this.getLsiValue("defaultLevel"),value:null}),[{type:p.Z,props:()=>({value:this.state.colorSchema,onClick:this._changeColorSchema,
tooltip:this.getLsiValue("colorSchemaTooltip")})},{type:"button",props:()=>({pressed:this.state.underline,onClick:this._toggleUnderline,tooltip:this.getLsiValue("underlineTooltip"),
icon:"mdi-format-underline"})},{type:"dropdown",props:()=>{let t=this.state.level?`${this.getLsiValue("level")} ${this.state.level}`:`${this.getLsiValue("defaultLevel")}`;return{
value:this.state.level,label:t,onClick:this._changeLevel,tooltip:this.getLsiValue("levelTooltip"),items:e,className:this.getClassName("levelDropdown")}}}]},_getToolbarSettings(){return[{
value:this.state.showHeader,onClick:this._toggleHeader,label:this.getLsiValue("showHeaderCheckboxLabel")},{value:this.state.showFooter,onClick:this._toggleFooter,
label:this.getLsiValue("showFooterCheckboxLabel")}]},_getToolbarProps(){let e=this.getMainPropsToPass();return e.onClose=this._onEndEditation,e.onMoreSettingsClick=this._openEditModal,
e.settingsItems=this._getToolbarSettings(),e.ref_=this._registerToolbar,e},_openEditModal(){this.props.component.endChildrenEditation(),this.setState({editModalOpen:!0})},_onCloseEditationModal(e){
if(e){let t={...e};delete t.children,delete t.content,this.setState({...t,editModalOpen:!1},(()=>this.props.component.saveEditation(e)))}else this.setState({editModalOpen:!1})},_renderEditModal(){
return Uu5g05.Utils.Element.create(l().BricksEditable.Modal,{shown:!0,componentName:this.props.component.getTagName(),
componentProps:this.props.component.getEditablePropsValues(Object.keys(this.props.component.props)),onClose:this._onCloseEditationModal,component:this.props.component,ref_:this._registerEditModal,
componentPropsForm:u,header:this.getLsiValue("modalHeader")})},render(){const e=this.getMainPropsToPass()
;return Uu5g05.Utils.Element.create(Uu5g05.Fragment,null,Uu5g05.Utils.Element.create(l().BricksEditable.Toolbar,n()({},e,{onClose:this._onEndEditation,settingsItems:this._getToolbarSettings(),
onMoreSettingsClick:this._openEditModal}),this.props.renderView([this.state.showHeader?Uu5g05.Utils.Element.create(l().BricksEditable.Input,{value:this.state.header||"",
placeholder:this.getLsi("headerPlaceholder"),onChange:this._changeHeaderContent,toolbarItems:this._getHeaderToolbarItems(),key:"headerInput"
},(({children:e})=>Uu5g05.Utils.Element.create(l().Bricks.Header,{underline:this.state.underline,level:this.state.level,parent:this.props.inline?void 0:this.props.component,nestingLevel:void 0
},e))):null,this.props.component.getChildren(),this.state.showFooter?Uu5g05.Utils.Element.create(l().BricksEditable.Input,{value:this.state.footer||"",placeholder:this.getLsi("footerPlaceholder"),
onChange:this._changeFooterContent,key:"footerInput"},(({children:e})=>Uu5g05.Utils.Element.create(l().Bricks.Footer,{parent:this.props.component
},e))):null],!0)),this.state.editModalOpen?this._renderEditModal():null)}}),v=g},9321:(e,t,o)=>{o.d(t,{Z:()=>d});var s=o(5032),n=o.n(s),i=o(4434),l=o(5082),r=o(7143),a=o(664)
;const p=function(e="grey",t=("black"===e?900:500)){let o=i.Environment.colors[e]||i.Environment.colors.grey;return o["c"+t]||o.c500},c=e=>Uu5g05.Utils.Element.create("div",{
title:e.title||e.colorSchema,
className:r.Z.css("\n          display: flex;\n          align-items: center;\n          cursor: pointer;\n        ")+" "+r.Z.css(`\n          line-height: ${e.height};\n\n          div {\n            width: ${e.width};\n            height: ${e.height};\n          }\n        `),
onClick:()=>{"function"==typeof e.onClick&&e.onClick(e.colorSchema)}},Uu5g05.Utils.Element.create("div",{
className:r.Z.css("\n            margin: 4px;\n            box-sizing: border-box;\n          ")+" "+r.Z.css(`background-color: ${p(e.colorSchema,e.depth)}`)+" "+r.Z.css("border: "+("white"===e.colorSchema?"1px solid black":"none")),
title:e.colorSchema}),e.label);c.propTypes={label:i.PropTypes.string,depth:i.PropTypes.number,onClick:i.PropTypes.func,title:i.PropTypes.string,colorSchema:i.PropTypes.string,
height:i.PropTypes.string,width:i.PropTypes.string},c.defaultProps={width:"32px",height:"32px"}
;const m=c,h=["indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","red","pink","purple","deep-purple","brown","grey","blue-grey","black","white"],d=i.Common.VisualComponent.create({
mixins:[i.Common.BaseMixin],statics:{tagName:l.Z.name("ColorPicker"),classNames:{
main:()=>l.Z.css("color-picker")+" "+r.Z.css("\n        position: relative;\n\n        & > .uu5-bricks-icon.uu5-bricks-icon.uu5-bricks-icon.uu5-bricks-icon {\n          margin-right: -10px;\n          position: relative;\n          top: -2px;\n        }\n\n        & > div {\n          position: absolute;\n          bottom: -1px;\n          left: 0;\n        }\n      "),
popover:()=>r.Z.css(`\n        width: 300px;\n        color: ${i.Environment.colors.common.darkText};\n\n        .uu5-bricks-popover-body {\n          & > div:last-child {\n            justify-content: center;\n            max-width: 100%;\n          }\n        }\n      `)
},lsi:a.Z.colorPicker},propTypes:{value:i.PropTypes.string,onClick:i.PropTypes.func,colorSchema:i.PropTypes.string,bgStyle:i.PropTypes.oneOf(["filled","outline","transparent","underline","link"])},
getDefaultProps:()=>({value:void 0,onClick:void 0,colorSchema:void 0,bgStyle:void 0}),getInitialState:()=>({open:!1}),_registerPopover(e){this._popover=e},_onChange(e){this._togglePicker(void 0,(()=>{
"function"==typeof this.props.onClick&&this.props.onClick({component:this,value:e})}))},_togglePicker(e,t){this.setState((e=>({open:!e.open})),(()=>{this.state.open?this._popover.open({
aroundElement:e.findDOMNode(),position:"bottom",onClose:()=>this.setState({open:!1})}):this._popover.close(),"function"==typeof t&&t()}))},_getProps(){let e=this.getMainPropsToPass()
;return e.onClick=this._togglePicker,e.tooltip=this.getLsiValue("colorSchemaTooltip"),e.pressed=this.state.open,e.colorSchema=this.props.colorSchema,e.bgStyle=this.props.bgStyle,e},render(){
return[Uu5g05.Utils.Element.create(i.Bricks.Button,n()({},this._getProps(),{key:"button"}),Uu5g05.Utils.Element.create(i.Bricks.Icon,{icon:"mdi-palette",key:"icon"}),Uu5g05.Utils.Element.create(m,{
className:"color-viewer",colorSchema:this.props.value,width:"24px",height:"4px",key:"color-viewer"})),Uu5g05.Utils.Element.create(i.Bricks.Popover,{key:"color-schema-popover",
ref_:this._registerPopover,controlled:!1,className:this.getClassName("popover"),forceRender:!0},Uu5g05.Utils.Element.create(i.Bricks.Div,null,Uu5g05.Utils.Element.create(m,{colorSchema:"default",
onClick:this._onChange,label:this.getLsiValue("defaultColorSchema")})),Uu5g05.Utils.Element.create(i.Bricks.Div,{style:{display:"flex",flexWrap:"wrap"}},h.map((e=>Uu5g05.Utils.Element.create(m,{key:e,
colorSchema:e,onClick:this._onChange})))))]}})},6765:(e,t,o)=>{o.d(t,{Hd:()=>g,XQ:()=>f,aO:()=>P,al:()=>U,kb:()=>_,mi:()=>E,ni:()=>y,xf:()=>v,xl:()=>S,xy:()=>C})
;var s=o(4434),n=o.n(s),i=o(5082),l=o(4415),r=o(2868),a=o(967),p=o(664),c=o(7143);let m,h,d=e=>e;const u={"1:1":["s-6","s-6"],"1:2":["m-4","m-8"],"2:1":["m-8","m-4"],
"1:1:1":["s-6 m-4","s-6 m-4","m-4"],"1:1:1:1":["s-6 m-3","s-6 m-3","s-6 m-3","s-6 m-3"]},g=n().Common.VisualComponent.create({mixins:[n().Common.BaseMixin],statics:{tagName:"PresetEditComponent",
classNames:{main:i.Z.css("row-properties-category")},lsi:()=>p.Z.row},propTypes:{componentProps:n().PropTypes.object,items:n().PropTypes.arrayOf(n().PropTypes.object),onChangeProps:n().PropTypes.func,
onChangeItems:n().PropTypes.func},getDefaultProps:()=>({componentProps:void 0,items:void 0,onChangeProps:void 0,onChangeItems:void 0}),getInitialState(){return this._pendingOnChange,{
confirmModalOpen:!1}},_onConfirmModalRegister(e){e.open()},_onRefuse(){this._pendingOnChange=void 0,this.setState({confirmModalOpen:!1})},_onConfirm(){this.setState({confirmModalOpen:!1
},this._changePreset)},_adjustItemsColWidth(e,t){if(e.length===t.length)return e.map(((e,o)=>({...e,props:{...e.props,colWidth:t[o]}})))
;this.showError("ColWidth couldn't be correctly adjusted because the number of items doesnt match the number of preset's items.")},_onChange({value:e}){
let t="safe",o=Array.isArray(this.props.items)?[...this.props.items]:[],s=u[e];if(s.length<o.length)t="destructing",
o.splice(s.length,o.length);else if(s.length>o.length)for(t="adjusting";s.length>o.length;)o.push({});o=this._adjustItemsColWidth(o,s),
"safe"===t||"adjusting"===t?this._changePreset(o):"destructing"===t&&(this._pendingOnChange=o,this._openConfirmModal())},_openConfirmModal(){this.setState({confirmModalOpen:!0})},_getConfirmModal(){
return Uu5g05.Utils.Element.create(l.Z,{onRefuse:this._onRefuse,onConfirm:this._onConfirm,content:this.getLsiComponent("layoutConfirmModalContent"),ref_:this._onConfirmModalRegister,size:"m",
header:this.getLsiComponent("layoutConfirmModalHeader"),confirmButtonProps:{content:this.getLsiComponent("layoutConfirmModalConfirm")},refuseButtonProps:{
content:this.getLsiComponent("layoutConfirmModalCancel")}})},_changePreset(e){e=e||this._pendingOnChange||null,this.props.onChangeItems(e),this._pendingOnChange=void 0},_getPresetValue(){let e=null
;return Array.isArray(this.props.items)&&this.props.items.length&&!this.props.items.find((e=>"UU5.Bricks.Column"!==e.tagName))&&(e=Object.keys(u).find((e=>{let t=u[e]
;if(t.length===this.props.items.length){return!t.find(((e,t)=>{let o=this.props.items[t].props.colWidth;if(o){
return n().Common.Tools.buildColWidthClassName(o)!==n().Common.Tools.buildColWidthClassName(e)}return!0}))}return!1}))),e},render(){
return Uu5g05.Utils.Element.create(Uu5g05.Fragment,null,Uu5g05.Utils.Element.create(n().Forms.Select,{label:this.getLsiComponent("columnsWidthPresetLabel"),value:this._getPresetValue()||"Custom",
onChange:this._onChange,labelColWidth:"xs-12",inputColWidth:"x-12",labelAlignment:"left"},Uu5g05.Utils.Element.create(n().Forms.Select.Option,{value:"Custom",hidden:!0
}),Object.keys(u).map(((e,t)=>Uu5g05.Utils.Element.create(n().Forms.Select.Option,{value:e,key:t})))),this.state.confirmModalOpen?this._getConfirmModal():null)}}),v=n().Common.VisualComponent.create({
mixins:[n().Common.BaseMixin],statics:{tagName:"ColWidthEditComponent",classNames:{main:i.Z.css("colwidth-edit-component")},lsi:()=>p.Z.row},propTypes:{componentProps:n().PropTypes.object,
items:n().PropTypes.arrayOf(n().PropTypes.object),onChangeProps:n().PropTypes.func,onChangeItems:n().PropTypes.func,editedItemId:n().PropTypes.string},getDefaultProps:()=>({componentProps:void 0,
items:void 0,onChangeProps:void 0,onChangeItems:void 0,editedItemId:void 0}),_isColWidth(e){let t=!0;if("string"==typeof e){
t=!e.trim().split(n().Common.REGEXP.splitByWhiteSpace).find((e=>!e.match(n().Common.REGEXP.columnRegexp)))}else t=!1;return t},_onChange({value:e}){
let t=[...this.props.items],o=t.findIndex((e=>e.id===this.props.editedItemId));t=t.map((e=>({id:e.id}))),this._isColWidth(e)?t[o].props={colWidth:e,width:null}:t[o].props={width:e,colWidth:null},
this.props.onChangeItems(t)},render(){let e,t=!1;if(Array.isArray(this.props.items))if(this.props.items.length){let o=this.props.items.findIndex((e=>e.id===this.props.editedItemId))
;e=this.props.items[o].props.width,e||(e=this.props.items[o].props.colWidth,t=!0)}else e="";else e=this.props.componentProps.width,e||(e=this.props.componentProps.colWidth,t=!0)
;return e&&t&&"object"==typeof e&&(e=n().Common.Tools.buildColWidthClassName(e).replace(/uu5-col-/g,"").replace(/xs|s|m|l|xl/g,(e=>`${e}-`))),Uu5g05.Utils.Element.create(n().Forms.Text,{
label:this.getLsiComponent("colWidthLabel"),message:this.getLsiComponent("colWidthTooltip"),value:e,onBlur:this._onChange})}}),C=()=>Uu5g05.Utils.Element.create("div",{className:b.main
},Uu5g05.Utils.Element.create(r.Z,{icon:"mdi-information",className:b.icon}),Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.common.itemInfo})),b={main:c.Z.css(m||(m=d`
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    color: #303030;
  `)),icon:c.Z.css(h||(h=d`
    color: rgba(0, 0, 0, 0.54);
    font-size: 56px;
  `))},f=({componentProps:e,onChangeProps:t,errors:o})=>Uu5g05.Utils.Element.create(n().Forms.Number,{min:32,step:32,suffix:"px",valueType:"number",label:Uu5g05.Utils.Element.create(a.Z,{
lsi:p.Z.qRCode.sizeLabel}),value:e.size,feedback:o&&o.size?"error":void 0,onChange:({value:e})=>t({size:e},{size:e<32||isNaN(e)}),onBlur:({value:e})=>t({size:e},{size:e<32||isNaN(e)})
}),U=({componentProps:e,onChangeProps:t})=>Uu5g05.Utils.Element.create(n().Forms.SwitchSelector,{items:[{content:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.common.valueFalse}),value:!1},{
content:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.common.valueTrue}),value:!0}],value:e.inline,label:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.card.inlineLabel}),onChange:({value:o})=>{t({inline:o,
width:o?e.width:null,minWidth:o?e.minWidth:null})}}),_=({componentProps:e,onChangeProps:t})=>Uu5g05.Utils.Element.create(n().Forms.SwitchSelector,{items:[{content:Uu5g05.Utils.Element.create(a.Z,{
lsi:p.Z.progressBar.stripedValueFalse}),value:!1},{content:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.progressBar.stripedValueTrue}),value:!0}],value:e.striped,label:Uu5g05.Utils.Element.create(a.Z,{
lsi:p.Z.progressBar.stripedLabel}),onChange:({value:o})=>{t({striped:o,animated:!!o&&e.animated})}}),y=({onChangeItems:e,items:t,editedItemId:o})=>{let s=t.findIndex((e=>e.id===o)),i=t[s]
;return Uu5g05.Utils.Element.create(n().Forms.SwitchSelector,{items:[{content:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.progressBar.stripedValueFalse}),value:!1},{
content:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.progressBar.stripedValueTrue}),value:!0}],value:i.props.striped,label:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.progressBar.stripedLabel}),
onChange:({value:o})=>{let n=t.map((e=>({id:e.id})));n[s].props||(n[s].props={}),n[s].props.striped=o,n[s].props.animated=!!o&&n[s].animated,e(n)}})
},P=({componentProps:e,onChangeProps:t})=>Uu5g05.Utils.Element.create(n().Common.Fragment,null,Uu5g05.Utils.Element.create(n().Forms.SwitchSelector,{items:[{content:Uu5g05.Utils.Element.create(a.Z,{
lsi:p.Z.line.verticalValueFalse}),value:!1},{content:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.line.verticalValueTrue}),value:!0}],value:!!e.vertical||"number"==typeof e.vertical,
label:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.line.verticalLabel}),onChange:({value:e})=>{t({vertical:e})}}),Uu5g05.Utils.Element.create(n().Forms.Number,{
value:"number"==typeof e.vertical?e.vertical:void 0,label:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.line.verticalHeightLabel}),disabled:!e.vertical&&"number"!=typeof e.vertical,valueType:"number",
min:1,suffix:"px",onChange:({value:e})=>{t({vertical:e})}})),E=({componentProps:e,onChangeProps:t})=>{let o=e.content?"content":"children";return Uu5g05.Utils.Element.create(n().Forms.Text,{
value:e[o],onBlur:({value:e})=>{t({[o]:e})},label:Uu5g05.Utils.Element.create(a.Z,{lsi:p.Z.common.contentLabel})})},S=(0,s.createComponent)({getInitialState(){let e=this.props.items.map((e=>{var t
;return{...e,props:{...e.props,name:null!==(t=e.props.name)&&void 0!==t?t:n().Common.Tools.generateUUID(8)}}}));return this.props.onChangeItems(e),{}},render:()=>null})}}]);