/*!
 * uu5g04 library with basic visual components
 * Copyright (C) 2021 Unicorn a.s.
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see Licenses - GNU Project <https://gnu.org/licenses/>.
 */
"use strict";(this.__webpack_jsonp_uu5g04_1_58_8_uu5g04_bricks=this.__webpack_jsonp_uu5g04_1_58_8_uu5g04_bricks||[]).push([[48],{7048:(e,t,i)=>{i.r(t),i.d(t,{ScreenSizeEditable:()=>f,default:()=>C})
;var s=i(5032),n=i.n(s),r=i(4434),a=i(5082),o=i(7143),l=i(664);let c,m,p,d=e=>e;const h=l.Z.screenSize,g=["xs","s","m","l","xl"],u={children:void 0
},S=a.Z.css("screen-size-editable"),_=a.Z.name("ScreenSizeEditable"),U={tagName:"UU5.Bricks.ScreenSize.Item",isElement:!0,props:{screenSize:"m"}};const v={setup:[{name:"screenSize",type:"tagSelect",
label:Uu5g05.Utils.Element.create(r.Bricks.Lsi,{lsi:h.sizes}),getProps:e=>({availableTags:[...g.map((e=>({value:e}))),{content:h.otherLabel,value:"*"}],multiple:!0,required:!0,
message:Uu5g05.Utils.Element.create(r.Bricks.Lsi,{lsi:h.sameScreenSizeInfo}),onChange:t=>{var i;let s=t.value;if(Array.isArray(s)){let e=s.indexOf("*");e>-1&&s.length>e+1?(s=[...s],
s.splice(e,1)):e>-1&&(s="*")}e.onChange({...t,value:(null===(i=s)||void 0===i?void 0:i.length)>1?s:s[0]})}})}],
info:Uu5g05.Utils.Element.create(r.Common.Fragment,null,Uu5g05.Utils.Element.create(r.Bricks.Lsi,{lsi:h.componentInfo})," ",Uu5g05.Utils.Element.create(r.Common.Help,{tagName:"UU5.Bricks.ScreenSize"
}))},E=()=>o.Z.css(c||(c=d`
      display: flex;
    `)),I=()=>o.Z.css(m||(m=d`
      flex: 1 0 auto;
      background-color: #C1C1C1;
    `)),b=e=>{let t="xl"===e?"flex-basis: 100%;":`\n      width: ${e};\n      max-width: 100%;\n    `;return o.Z.css(p||(p=d`
        ${0};
    `),t)},f=r.Common.VisualComponent.create({mixins:[r.Common.BaseMixin,r.Common.ContentMixin],statics:{tagName:_,classNames:{main:S},lsi:()=>h},propTypes:{component:r.PropTypes.object.isRequired,
editMode:r.PropTypes.object},getDefaultProps:()=>({component:null}),getInitialState(){return{...this._getState(this.props),activeItemIndex:0,editationModalOpen:!1}},componentWillReceiveProps(e){
this.setState({...this._getState(e)})},getPropsToSave(){return this.state.editationModalOpen?this._modal.getPropsToSave():{}},_getState(e){let t={
...e.component.getEditablePropsValues(Object.keys(this.props.component.props))},i=e.component.getChildren();if(!Array.isArray(i)&&i&&(i=[i]),Array.isArray(i)){var s
;let e=null===(s=this.props.component.getDefault())||void 0===s?void 0:s.childTagName;i=i.filter((t=>r.Common.Element.isValid(t)&&t.type.tagName===e)),0===i.length&&(i=null)}return t.children=i,t},
_onSettingsClick(){this.props.component.endChildrenEditation(),this.setState((e=>({editationModalOpen:!e.editationModalOpen})))},_registerEditToolbar(e){this._editToolbar=e},_registerDiv(e){
this._div=e},_onEndEditation(){this.props.component.endEditation()},_onChangeRenderedItem({value:e}){this.props.component.endChildrenEditation(),this.setState({activeItemIndex:e})},_getPropsToSave(e){
void 0===e&&(e={...this.state});for(let t in u)void 0!==e[t]&&e[t]===u[t]&&(e[t]=void 0);return e},_getSwitchSelectorLabels:e=>"string"==typeof e?"*"===e?Uu5g05.Utils.Element.create(r.Bricks.Lsi,{
lsi:h.otherLabel}):e:e.map(((t,i)=>e.length===i+1?`${t}`:`${t}, `)),_getToolbarItems(e){return Array.isArray(e)?[Uu5g05.Utils.Element.create(r.Bricks.SwitchSelector,{items:(e||[]).map(((e,t)=>({
value:t,content:this._getSwitchSelectorLabels(e.props.screenSize),bgStyle:this.state.activeItemIndex===t?"underline":void 0,colorSchema:"primary"}))),onChange:this._onChangeRenderedItem,
value:this.state.activeItemIndex,key:"switchSelector",bgStyle:"transparent",colorSchema:"custom",size:"l"})]:null},_sizeToUse(e){for(let t=g.length-1;t>=0;t--){let i=e.find((e=>e===g[t]))
;if(i)return i}},_renderItem(e){if(Array.isArray(e)&&e[this.state.activeItemIndex]){let t
;if("string"==typeof e[this.state.activeItemIndex].props.screenSize)t="*"===e[this.state.activeItemIndex].props.screenSize?"*":r.Utils.ScreenSize.SIZE_MAP[e[this.state.activeItemIndex].props.screenSize];else{
let i=this._sizeToUse(e[this.state.activeItemIndex].props.screenSize);i&&(t=r.Utils.ScreenSize.SIZE_MAP[i])}return t=t===1/0||"*"===t?"xl":`${t}px`,
r.Common.Element.clone(e[this.state.activeItemIndex],{className:b(t)})}return null},_getAllItems(e){if(Array.isArray(e)){return e.map((e=>e))}return null},_getItemLabel(e,t){let i=""
;return i=e.props&&e.props.screenSize?`${e.props.screenSize}`:e.screenSize?`${null==e?void 0:e.screenSize}`:this.getLsiComponent("itemLabel",void 0,{itemNumber:t+1}),
"*"===i&&(i=Uu5g05.Utils.Element.create(r.Bricks.Lsi,{lsi:h.otherLabel})),i},_renderMoreSettingsModal(){let e=this.props.component.getEditablePropsValues(Object.keys(this.props.component.props))
;return e.info="",this.state.editationModalOpen?Uu5g05.Utils.Element.create(r.Common.Suspense,{fallback:""},Uu5g05.Utils.Element.create(r.BricksEditable.Modal,{shown:!0,
componentName:this.props.component.getTagName(),componentProps:e,header:l.Z.screenSize.name,onClose:this._onCloseEditationModal,itemName:r.Bricks.ScreenSize.Item.tagName,
itemDefaultProps:r.Bricks.ScreenSize.Item.defaultProps,itemPropsForm:v,itemsSource:"children",newItem:U,ref_:e=>this._modal=e,getItemLabel:this._getItemLabel})):null},_onCloseEditationModal(e){
e?this.setState({editationModalOpen:!1,children:r.Common.UU5String.toChildren(e.children)},(()=>{this.props.component.saveEditation(e)})):this.setState({editationModalOpen:!1})},render(){
let e=this.state.children;if(!Array.isArray(e)&&e&&(e=[e]),Array.isArray(e)){var t;let i=null===(t=this.props.component.getDefault())||void 0===t?void 0:t.childTagName
;e=e.filter((e=>r.Common.Element.isValid(e)&&e.type.tagName===i)),0===e.length&&(e=null)}
return this.props.editMode&&!this.props.editMode.edit?Uu5g05.Utils.Element.create(Uu5g05.Fragment,null,this._getToolbarItems(this.state.children),Uu5g05.Utils.Element.create("span",{className:I()
}),this._renderItem(this.state.children),Uu5g05.Utils.Element.create("span",{className:I()
})):Uu5g05.Utils.Element.create(Uu5g05.Fragment,null,Uu5g05.Utils.Element.create(r.BricksEditable.Toolbar,n()({},this.getMainPropsToPass(),{ref_:this._registerEditToolbar,
items:this._getToolbarItems(this.state.children),onMoreSettingsClick:this._onSettingsClick,onClose:this._onEndEditation}),Uu5g05.Utils.Element.create(r.Bricks.Div,{className:E(),ref_:this._registerDiv
},Uu5g05.Utils.Element.create("span",{className:I()}),this._renderItem(this.state.children),Uu5g05.Utils.Element.create("span",{className:I()}))),this._renderMoreSettingsModal())}}),C=f}}]);