/*!
 * uu5g04 library with basic visual components
 * Copyright (C) 2021 Unicorn a.s.
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see Licenses - GNU Project <https://gnu.org/licenses/>.
 */
"use strict";(this.__webpack_jsonp_uu5g04_1_58_8_uu5g04_bricks=this.__webpack_jsonp_uu5g04_1_58_8_uu5g04_bricks||[]).push([[757],{6765:(e,t,o)=>{o.d(t,{Hd:()=>g,XQ:()=>v,aO:()=>P,al:()=>f,kb:()=>E,
mi:()=>Z,ni:()=>_,xf:()=>C,xl:()=>y,xy:()=>b});var n=o(4434),s=o.n(n),l=o(5082),i=o(4415),a=o(2868),r=o(967),p=o(664),m=o(7143);let d,u,c=e=>e;const h={"1:1":["s-6","s-6"],"1:2":["m-4","m-8"],
"2:1":["m-8","m-4"],"1:1:1":["s-6 m-4","s-6 m-4","m-4"],"1:1:1:1":["s-6 m-3","s-6 m-3","s-6 m-3","s-6 m-3"]},g=s().Common.VisualComponent.create({mixins:[s().Common.BaseMixin],statics:{
tagName:"PresetEditComponent",classNames:{main:l.Z.css("row-properties-category")},lsi:()=>p.Z.row},propTypes:{componentProps:s().PropTypes.object,items:s().PropTypes.arrayOf(s().PropTypes.object),
onChangeProps:s().PropTypes.func,onChangeItems:s().PropTypes.func},getDefaultProps:()=>({componentProps:void 0,items:void 0,onChangeProps:void 0,onChangeItems:void 0}),getInitialState(){
return this._pendingOnChange,{confirmModalOpen:!1}},_onConfirmModalRegister(e){e.open()},_onRefuse(){this._pendingOnChange=void 0,this.setState({confirmModalOpen:!1})},_onConfirm(){this.setState({
confirmModalOpen:!1},this._changePreset)},_adjustItemsColWidth(e,t){if(e.length===t.length)return e.map(((e,o)=>({...e,props:{...e.props,colWidth:t[o]}})))
;this.showError("ColWidth couldn't be correctly adjusted because the number of items doesnt match the number of preset's items.")},_onChange({value:e}){
let t="safe",o=Array.isArray(this.props.items)?[...this.props.items]:[],n=h[e];if(n.length<o.length)t="destructing",
o.splice(n.length,o.length);else if(n.length>o.length)for(t="adjusting";n.length>o.length;)o.push({});o=this._adjustItemsColWidth(o,n),
"safe"===t||"adjusting"===t?this._changePreset(o):"destructing"===t&&(this._pendingOnChange=o,this._openConfirmModal())},_openConfirmModal(){this.setState({confirmModalOpen:!0})},_getConfirmModal(){
return Uu5g05.Utils.Element.create(i.Z,{onRefuse:this._onRefuse,onConfirm:this._onConfirm,content:this.getLsiComponent("layoutConfirmModalContent"),ref_:this._onConfirmModalRegister,size:"m",
header:this.getLsiComponent("layoutConfirmModalHeader"),confirmButtonProps:{content:this.getLsiComponent("layoutConfirmModalConfirm")},refuseButtonProps:{
content:this.getLsiComponent("layoutConfirmModalCancel")}})},_changePreset(e){e=e||this._pendingOnChange||null,this.props.onChangeItems(e),this._pendingOnChange=void 0},_getPresetValue(){let e=null
;return Array.isArray(this.props.items)&&this.props.items.length&&!this.props.items.find((e=>"UU5.Bricks.Column"!==e.tagName))&&(e=Object.keys(h).find((e=>{let t=h[e]
;if(t.length===this.props.items.length){return!t.find(((e,t)=>{let o=this.props.items[t].props.colWidth;if(o){
return s().Common.Tools.buildColWidthClassName(o)!==s().Common.Tools.buildColWidthClassName(e)}return!0}))}return!1}))),e},render(){
return Uu5g05.Utils.Element.create(Uu5g05.Fragment,null,Uu5g05.Utils.Element.create(s().Forms.Select,{label:this.getLsiComponent("columnsWidthPresetLabel"),value:this._getPresetValue()||"Custom",
onChange:this._onChange,labelColWidth:"xs-12",inputColWidth:"x-12",labelAlignment:"left"},Uu5g05.Utils.Element.create(s().Forms.Select.Option,{value:"Custom",hidden:!0
}),Object.keys(h).map(((e,t)=>Uu5g05.Utils.Element.create(s().Forms.Select.Option,{value:e,key:t})))),this.state.confirmModalOpen?this._getConfirmModal():null)}}),C=s().Common.VisualComponent.create({
mixins:[s().Common.BaseMixin],statics:{tagName:"ColWidthEditComponent",classNames:{main:l.Z.css("colwidth-edit-component")},lsi:()=>p.Z.row},propTypes:{componentProps:s().PropTypes.object,
items:s().PropTypes.arrayOf(s().PropTypes.object),onChangeProps:s().PropTypes.func,onChangeItems:s().PropTypes.func,editedItemId:s().PropTypes.string},getDefaultProps:()=>({componentProps:void 0,
items:void 0,onChangeProps:void 0,onChangeItems:void 0,editedItemId:void 0}),_isColWidth(e){let t=!0;if("string"==typeof e){
t=!e.trim().split(s().Common.REGEXP.splitByWhiteSpace).find((e=>!e.match(s().Common.REGEXP.columnRegexp)))}else t=!1;return t},_onChange({value:e}){
let t=[...this.props.items],o=t.findIndex((e=>e.id===this.props.editedItemId));t=t.map((e=>({id:e.id}))),this._isColWidth(e)?t[o].props={colWidth:e,width:null}:t[o].props={width:e,colWidth:null},
this.props.onChangeItems(t)},render(){let e,t=!1;if(Array.isArray(this.props.items))if(this.props.items.length){let o=this.props.items.findIndex((e=>e.id===this.props.editedItemId))
;e=this.props.items[o].props.width,e||(e=this.props.items[o].props.colWidth,t=!0)}else e="";else e=this.props.componentProps.width,e||(e=this.props.componentProps.colWidth,t=!0)
;return e&&t&&"object"==typeof e&&(e=s().Common.Tools.buildColWidthClassName(e).replace(/uu5-col-/g,"").replace(/xs|s|m|l|xl/g,(e=>`${e}-`))),Uu5g05.Utils.Element.create(s().Forms.Text,{
label:this.getLsiComponent("colWidthLabel"),message:this.getLsiComponent("colWidthTooltip"),value:e,onBlur:this._onChange})}}),b=()=>Uu5g05.Utils.Element.create("div",{className:U.main
},Uu5g05.Utils.Element.create(a.Z,{icon:"mdi-information",className:U.icon}),Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.common.itemInfo})),U={main:m.Z.css(d||(d=c`
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    color: #303030;
  `)),icon:m.Z.css(u||(u=c`
    color: rgba(0, 0, 0, 0.54);
    font-size: 56px;
  `))},v=({componentProps:e,onChangeProps:t,errors:o})=>Uu5g05.Utils.Element.create(s().Forms.Number,{min:32,step:32,suffix:"px",valueType:"number",label:Uu5g05.Utils.Element.create(r.Z,{
lsi:p.Z.qRCode.sizeLabel}),value:e.size,feedback:o&&o.size?"error":void 0,onChange:({value:e})=>t({size:e},{size:e<32||isNaN(e)}),onBlur:({value:e})=>t({size:e},{size:e<32||isNaN(e)})
}),f=({componentProps:e,onChangeProps:t})=>Uu5g05.Utils.Element.create(s().Forms.SwitchSelector,{items:[{content:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.common.valueFalse}),value:!1},{
content:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.common.valueTrue}),value:!0}],value:e.inline,label:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.card.inlineLabel}),onChange:({value:o})=>{t({inline:o,
width:o?e.width:null,minWidth:o?e.minWidth:null})}}),E=({componentProps:e,onChangeProps:t})=>Uu5g05.Utils.Element.create(s().Forms.SwitchSelector,{items:[{content:Uu5g05.Utils.Element.create(r.Z,{
lsi:p.Z.progressBar.stripedValueFalse}),value:!1},{content:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.progressBar.stripedValueTrue}),value:!0}],value:e.striped,label:Uu5g05.Utils.Element.create(r.Z,{
lsi:p.Z.progressBar.stripedLabel}),onChange:({value:o})=>{t({striped:o,animated:!!o&&e.animated})}}),_=({onChangeItems:e,items:t,editedItemId:o})=>{let n=t.findIndex((e=>e.id===o)),l=t[n]
;return Uu5g05.Utils.Element.create(s().Forms.SwitchSelector,{items:[{content:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.progressBar.stripedValueFalse}),value:!1},{
content:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.progressBar.stripedValueTrue}),value:!0}],value:l.props.striped,label:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.progressBar.stripedLabel}),
onChange:({value:o})=>{let s=t.map((e=>({id:e.id})));s[n].props||(s[n].props={}),s[n].props.striped=o,s[n].props.animated=!!o&&s[n].animated,e(s)}})
},P=({componentProps:e,onChangeProps:t})=>Uu5g05.Utils.Element.create(s().Common.Fragment,null,Uu5g05.Utils.Element.create(s().Forms.SwitchSelector,{items:[{content:Uu5g05.Utils.Element.create(r.Z,{
lsi:p.Z.line.verticalValueFalse}),value:!1},{content:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.line.verticalValueTrue}),value:!0}],value:!!e.vertical||"number"==typeof e.vertical,
label:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.line.verticalLabel}),onChange:({value:e})=>{t({vertical:e})}}),Uu5g05.Utils.Element.create(s().Forms.Number,{
value:"number"==typeof e.vertical?e.vertical:void 0,label:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.line.verticalHeightLabel}),disabled:!e.vertical&&"number"!=typeof e.vertical,valueType:"number",
min:1,suffix:"px",onChange:({value:e})=>{t({vertical:e})}})),Z=({componentProps:e,onChangeProps:t})=>{let o=e.content?"content":"children";return Uu5g05.Utils.Element.create(s().Forms.Text,{
value:e[o],onBlur:({value:e})=>{t({[o]:e})},label:Uu5g05.Utils.Element.create(r.Z,{lsi:p.Z.common.contentLabel})})},y=(0,n.createComponent)({getInitialState(){let e=this.props.items.map((e=>{var t
;return{...e,props:{...e.props,name:null!==(t=e.props.name)&&void 0!==t?t:s().Common.Tools.generateUUID(8)}}}));return this.props.onChangeItems(e),{}},render:()=>null})},5757:(e,t,o)=>{o.r(t),o.d(t,{
Row:()=>E,default:()=>_});var n=o(5032),s=o.n(n),l=o(4434),i=o(5082),a=o(1457),r=o(8511),p=o(8069),m=o(967),d=o(664),u=o(7143),c=o(6765);const h={contentEditable:!1,noSpacing:!1,level:null,
underline:!1,display:"standard",header:"",footer:"",content:null,children:null},g=i.Z.css("row"),C=i.Z.name("Row"),b=[{name:Uu5g05.Utils.Element.create(m.Z,{lsi:d.Z.row.mainPropertiesLabel}),
setup:[c.Hd,{name:"display",type:"switchSelector",label:d.Z.row.displayLabel,getProps:()=>({items:[{value:"standard",content:Uu5g05.Utils.Element.create(m.Z,{lsi:d.Z.row.displayValueStandard})},{
value:"flex",content:Uu5g05.Utils.Element.create(m.Z,{lsi:d.Z.row.displayValueFlex})}]})},{name:"noSpacing",type:"switchSelector",label:d.Z.row.horizontalPaddingLabel,getProps:()=>({items:[{value:!1,
content:Uu5g05.Utils.Element.create(m.Z,{lsi:d.Z.row.horizontalPaddingValueStandard})},{value:!0,content:Uu5g05.Utils.Element.create(m.Z,{lsi:d.Z.row.horizontalPaddingValueNone})}]})},{
name:"className",type:"text",label:Uu5g05.Utils.Element.create(m.Z,{lsi:d.Z.row.classNameLabel})}]}],U={setup:[c.xf,{name:"noSpacing",type:"switchSelector",label:d.Z.row.horizontalPaddingLabel,
getProps:()=>({items:[{value:!1,content:Uu5g05.Utils.Element.create(m.Z,{lsi:d.Z.row.horizontalPaddingValueStandard})},{value:!0,content:Uu5g05.Utils.Element.create(m.Z,{
lsi:d.Z.row.horizontalPaddingValueNone})}]})},{name:"className",type:"text",label:Uu5g05.Utils.Element.create(m.Z,{lsi:d.Z.row.classNameLabel})}]},v={tagName:"UU5.Bricks.Column",isElement:!0,props:{
contentEditable:!0}};function f(e,t){return`Column ${t+1}`}const E=l.Common.VisualComponent.create({mixins:[l.Common.BaseMixin],statics:{tagName:C,classNames:{main:g,
checkbox:()=>u.Z.css("\n          cursor: pointer;\n          margin-top: 0px;\n          width: 100%;\n\n          &.uu5-forms-checkbox {\n            margin-bottom: 0px;\n          }\n\n          &:hover {\n            background-color: #EEEEEE;\n          }\n\n          &:first-child {\n            margin-top: 4px;\n          }\n\n          &:last-child {\n            margin-bottom: 4px;\n          }\n\n          .uu5-forms-checkbox-button.uu5-forms-checkbox-button.uu5-forms-checkbox-button {\n            border-color: transparent;\n            background-color: transparent;\n            outline: none;\n          }\n\n          label {\n            cursor: pointer;\n          }\n\n          .uu5-forms-label {\n            width: 80%;\n\n            + .uu5-forms-input-wrapper {\n              width: 20%;\n            }\n          }\n        ")
},lsi:()=>({...d.Z.row,...d.Z.common})},propTypes:{component:l.PropTypes.object.isRequired},getDefaultProps:()=>({component:null}),getInitialState(){
let e=this.props.component.getEditablePropsValues(Object.keys(h));return{...e,showFooter:!!e.footer,showHeader:!!e.header,editModalOpen:!1}},getPropsToSave(){return this._getPropsToSave()},
_onEndEditation(){this.props.component.endEditation(this._getPropsToSave())},_getPropsToSave(e=this.state){let{children:t,content:o,flex:n,editModalOpen:s,showHeader:l,showFooter:i,...a}=e
;for(let e in h)void 0!==a[e]&&a[e]===h[e]&&(a[e]=void 0);return l||(a.header=void 0),i||(a.footer=void 0),a},_onCloseEditationModal(e){if(e){let t={...e};delete t.children,delete t.content,
this.setState({...t,editModalOpen:!1},(()=>this.props.component.saveEditation(e)))}else this.setState({editModalOpen:!1})},_openEditModal(){this.setState({editModalOpen:!0})},_closeEditModal(){
this.setState({editModalOpen:!1})},_toggleHeader(){this.setState((e=>({showHeader:!e.showHeader})))},_toggleFooter(){this.setState((e=>({showFooter:!e.showFooter})))},_toggleUnderline(){
this.setState((e=>({underline:!e.underline})))},_toggleDisplay(){this.setState((e=>({display:"flex"===e.display?"standard":"flex"})),(()=>{this.props.component.saveEditation({
display:this.state.display})}))},_changeLevel(e){this.setState({level:e})},_changeHeaderContent(e){this.setState({header:e.value})},_changeFooterContent(e){this.setState({footer:e.value})},
_getHeaderToolbarItems(){let e=[1,2,3,4,5,6].map((e=>({content:`${this.getLsiValue("level")} ${e}`,value:`${e}`})));return e.unshift({content:this.getLsiComponent("defaultLevel"),value:null}),[{
type:"separator"},{type:"button",props:()=>({pressed:this.state.underline,onClick:this._toggleUnderline,tooltip:this.getLsiValue("underlineTooltip"),icon:"mdi-format-underline"})},{type:"dropdown",
props:()=>{let t=this.state.level?`${this.getLsiValue("level")} ${this.state.level}`:`${this.getLsiValue("defaultLevel")}`;return{value:this.state.level,label:t,
tooltip:this.getLsiValue("levelTooltip"),items:e,onClick:this._changeLevel}}}]},_getToolbarItems(){return[{type:"button",props:()=>({pressed:this.state.editModalOpen,icon:"mdi-view-column",
onClick:this._openEditModal,tooltip:this.getLsiValue("layoutTooltip")})}]},_getToolbarSettings(){return[{value:this.state.showHeader,onClick:this._toggleHeader,
label:this.getLsiComponent("showHeaderCheckboxLabel")},{value:this.state.showFooter,onClick:this._toggleFooter,label:this.getLsiComponent("showFooterCheckboxLabel")},{
value:"flex"===this.state.display,onClick:this._toggleDisplay,label:this.getLsiComponent("flexCheckboxLabel")}]},_renderEditModal(){return Uu5g05.Utils.Element.create(l.Common.Suspense,{fallback:""
},Uu5g05.Utils.Element.create(l.BricksEditable.Modal,{shown:!0,onClose:this._onCloseEditationModal,componentName:this.props.component.getTagName(),
componentProps:this.props.component.getEditablePropsValues(Object.keys(this.props.component.props)),componentPropsForm:b,itemName:a.Z.tagName,itemDefaultProps:a.Z.defaultProps,itemPropsForm:U,
newItem:v,getItemLabel:f}))},render(){return Uu5g05.Utils.Element.create(Uu5g05.Fragment,null,Uu5g05.Utils.Element.create(l.BricksEditable.Toolbar,s()({},this.getMainPropsToPass(),{
onClose:this._onEndEditation,items:this._getToolbarItems(),settingsItems:this._getToolbarSettings()}),[this.state.showHeader?Uu5g05.Utils.Element.create(l.BricksEditable.Input,{
value:this.state.header||"",placeholder:this.getLsi("headerPlaceholder"),onChange:this._changeHeaderContent,toolbarItems:this._getHeaderToolbarItems(),key:"headerInput"
},(({children:e})=>Uu5g05.Utils.Element.create(p.Z,{underline:this.state.underline,level:this.state.level,parent:this.props.component
},e))):null,this.props.component.getChildren(),this.state.showFooter?Uu5g05.Utils.Element.create(l.BricksEditable.Input,{value:this.state.footer||"",placeholder:this.getLsi("footerPlaceholder"),
onChange:this._changeFooterContent,key:"footerInput"},(({children:e})=>Uu5g05.Utils.Element.create(r.Z,{parent:this.props.component},e))):null]),this.state.editModalOpen?this._renderEditModal():null)}
}),_=E}}]);