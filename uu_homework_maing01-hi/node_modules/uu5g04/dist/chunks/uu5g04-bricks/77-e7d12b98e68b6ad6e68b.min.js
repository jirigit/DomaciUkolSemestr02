/*!
 * uu5g04 library with basic visual components
 * Copyright (C) 2021 Unicorn a.s.
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see Licenses - GNU Project <https://gnu.org/licenses/>.
 */
"use strict";(this.__webpack_jsonp_uu5g04_1_58_8_uu5g04_bricks=this.__webpack_jsonp_uu5g04_1_58_8_uu5g04_bricks||[]).push([[77],{9321:(e,t,o)=>{o.d(t,{Z:()=>d})
;var s=o(5032),n=o.n(s),i=o(4434),l=o(5082),r=o(7143),a=o(664);const c=function(e="grey",t=("black"===e?900:500)){let o=i.Environment.colors[e]||i.Environment.colors.grey;return o["c"+t]||o.c500
},p=e=>Uu5g05.Utils.Element.create("div",{title:e.title||e.colorSchema,
className:r.Z.css("\n          display: flex;\n          align-items: center;\n          cursor: pointer;\n        ")+" "+r.Z.css(`\n          line-height: ${e.height};\n\n          div {\n            width: ${e.width};\n            height: ${e.height};\n          }\n        `),
onClick:()=>{"function"==typeof e.onClick&&e.onClick(e.colorSchema)}},Uu5g05.Utils.Element.create("div",{
className:r.Z.css("\n            margin: 4px;\n            box-sizing: border-box;\n          ")+" "+r.Z.css(`background-color: ${c(e.colorSchema,e.depth)}`)+" "+r.Z.css("border: "+("white"===e.colorSchema?"1px solid black":"none")),
title:e.colorSchema}),e.label);p.propTypes={label:i.PropTypes.string,depth:i.PropTypes.number,onClick:i.PropTypes.func,title:i.PropTypes.string,colorSchema:i.PropTypes.string,
height:i.PropTypes.string,width:i.PropTypes.string},p.defaultProps={width:"32px",height:"32px"}
;const h=p,u=["indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","red","pink","purple","deep-purple","brown","grey","blue-grey","black","white"],d=i.Common.VisualComponent.create({
mixins:[i.Common.BaseMixin],statics:{tagName:l.Z.name("ColorPicker"),classNames:{
main:()=>l.Z.css("color-picker")+" "+r.Z.css("\n        position: relative;\n\n        & > .uu5-bricks-icon.uu5-bricks-icon.uu5-bricks-icon.uu5-bricks-icon {\n          margin-right: -10px;\n          position: relative;\n          top: -2px;\n        }\n\n        & > div {\n          position: absolute;\n          bottom: -1px;\n          left: 0;\n        }\n      "),
popover:()=>r.Z.css(`\n        width: 300px;\n        color: ${i.Environment.colors.common.darkText};\n\n        .uu5-bricks-popover-body {\n          & > div:last-child {\n            justify-content: center;\n            max-width: 100%;\n          }\n        }\n      `)
},lsi:a.Z.colorPicker},propTypes:{value:i.PropTypes.string,onClick:i.PropTypes.func,colorSchema:i.PropTypes.string,bgStyle:i.PropTypes.oneOf(["filled","outline","transparent","underline","link"])},
getDefaultProps:()=>({value:void 0,onClick:void 0,colorSchema:void 0,bgStyle:void 0}),getInitialState:()=>({open:!1}),_registerPopover(e){this._popover=e},_onChange(e){this._togglePicker(void 0,(()=>{
"function"==typeof this.props.onClick&&this.props.onClick({component:this,value:e})}))},_togglePicker(e,t){this.setState((e=>({open:!e.open})),(()=>{this.state.open?this._popover.open({
aroundElement:e.findDOMNode(),position:"bottom",onClose:()=>this.setState({open:!1})}):this._popover.close(),"function"==typeof t&&t()}))},_getProps(){let e=this.getMainPropsToPass()
;return e.onClick=this._togglePicker,e.tooltip=this.getLsiValue("colorSchemaTooltip"),e.pressed=this.state.open,e.colorSchema=this.props.colorSchema,e.bgStyle=this.props.bgStyle,e},render(){
return[Uu5g05.Utils.Element.create(i.Bricks.Button,n()({},this._getProps(),{key:"button"}),Uu5g05.Utils.Element.create(i.Bricks.Icon,{icon:"mdi-palette",key:"icon"}),Uu5g05.Utils.Element.create(h,{
className:"color-viewer",colorSchema:this.props.value,width:"24px",height:"4px",key:"color-viewer"})),Uu5g05.Utils.Element.create(i.Bricks.Popover,{key:"color-schema-popover",
ref_:this._registerPopover,controlled:!1,className:this.getClassName("popover"),forceRender:!0},Uu5g05.Utils.Element.create(i.Bricks.Div,null,Uu5g05.Utils.Element.create(h,{colorSchema:"default",
onClick:this._onChange,label:this.getLsiValue("defaultColorSchema")})),Uu5g05.Utils.Element.create(i.Bricks.Div,{style:{display:"flex",flexWrap:"wrap"}},u.map((e=>Uu5g05.Utils.Element.create(h,{key:e,
colorSchema:e,onClick:this._onChange})))))]}})},1077:(e,t,o)=>{o.r(t),o.d(t,{NewspaperEditable:()=>g,default:()=>m});var s=o(5032),n=o.n(s),i=o(4434),l=o(5082),r=o(664),a=o(7143),c=o(9321);const p={
contentEditable:!1,columnsCount:0,underline:!1,level:null,header:"",footer:"",colorSchema:null,content:null,children:null},h=l.Z.css("newspaper-editable"),u=l.Z.name("NewspaperEditable")
;function d(e){return 1===e?"columnsCountValue1":2===e||3===e?"columnsCountValue2":"columnsCountValue3"}const g=i.Common.VisualComponent.create({mixins:[i.Common.BaseMixin],statics:{tagName:u,
classNames:{main:h,columnsCountDropdown:()=>a.Z.css("\n          &.uu5-bricks-editable-toolbar-dropdown {\n            width: 148px;\n          }\n        ")},lsi:()=>({...r.Z.newspaper,...r.Z.common
})},propTypes:{component:i.PropTypes.object.isRequired,renderView:i.PropTypes.func},getDefaultProps:()=>({component:null,renderView:void 0}),getInitialState(){
let e=this.props.component.getEditablePropsValues(Object.keys(p));return{...e,showFooter:!!e.footer,showHeader:!!e.header}},getPropsToSave(){return this._getPropsToSave()},_onEndEditation(){
this.props.component.endEditation(this._getPropsToSave())},_getPropsToSave(e=this.state){let{showFooter:t,showHeader:o,children:s,content:n,...i}=e
;for(let e in p)void 0!==i[e]&&i[e]===p[e]&&(i[e]=void 0);return o||(i.header=void 0),t||(i.footer=void 0),i},_changeColorSchema(e){this.setState({colorSchema:e.value},(()=>{
this.props.component.saveEditation({colorSchema:e.value&&"default"!==e.value?e.value:void 0})}))},_toggleHeader(e,t){this.setState((e=>({showHeader:!e.showHeader})),t)},_toggleFooter(e,t){
this.setState((e=>({showFooter:!e.showFooter})),t)},_toggleUnderline(){this.setState((e=>({underline:!e.underline})))},_changeLevel(e,t){this.setState({level:e},t)},_changeColumnsCount(e){
this.setState({columnsCount:e},(()=>this.props.component.saveEditation({columnsCount:e})))},_changeHeaderContent(e){this.setState({header:e.value})},_changeFooterContent(e){this.setState({
footer:e.value})},_getHeaderToolbarItems(){let e=[1,2,3,4,5,6].map((e=>({content:`${this.getLsiValue("level")} ${e}`,value:e})));return e.unshift({content:this.getLsiValue("defaultLevel"),value:null
}),[{type:"button",props:()=>({pressed:this.state.underline,onClick:this._toggleUnderline,tooltip:this.getLsiValue("underlineTooltip"),icon:"mdi-format-underline"})},{type:"dropdown",props:()=>{
let t=this.state.level?`${this.getLsiValue("level")} ${this.state.level}`:`${this.getLsiValue("defaultLevel")}`;return{value:this.state.level,label:t,onClick:this._changeLevel,
tooltip:this.getLsiValue("levelTooltip"),items:e,className:this.getClassName("levelDropdown")}}}]},_getToolbarItems(){let e=[1,2,3,4,5,6].map((e=>({content:`${e} ${this.getLsiValue(d(e))}`,value:e})))
;return[{type:c.Z,props:()=>({value:this.state.colorSchema,onClick:this._changeColorSchema,tooltip:this.getLsiValue("colorSchemaTooltip")})},{type:"dropdown",props:()=>{
let t=`${this.state.columnsCount} ${this.getLsiValue(d(this.state.columnsCount))}`;return{value:this.state.columnsCount,label:t,onClick:this._changeColumnsCount,
tooltip:this.getLsiValue("columnsCountTooltip"),items:e,className:this.getClassName("columnsCountDropdown")}}}]},_getToolbarSettings(){return[{value:this.state.showHeader,onClick:this._toggleHeader,
label:this.getLsiComponent("showHeaderCheckboxLabel")},{value:this.state.showFooter,onClick:this._toggleFooter,label:this.getLsiComponent("showFooterCheckboxLabel")}]},render(){
const e=this.getMainPropsToPass();return Uu5g05.Utils.Element.create(i.BricksEditable.Toolbar,n()({},e,{onClose:this._onEndEditation,settingsItems:this._getToolbarSettings(),
items:this._getToolbarItems()}),this.props.renderView([this.state.showHeader?Uu5g05.Utils.Element.create(i.BricksEditable.Input,{value:this.state.header||"",
placeholder:this.getLsi("headerPlaceholder"),onChange:this._changeHeaderContent,toolbarItems:this._getHeaderToolbarItems(),key:"headerInput"
},(({children:e})=>Uu5g05.Utils.Element.create(i.Bricks.Header,{underline:this.state.underline,level:this.state.level,parent:this.props.renderInline?void 0:this.props.component,nestingLevel:void 0
},e))):null,this.props.component.getChildren(),this.state.showFooter?Uu5g05.Utils.Element.create(i.BricksEditable.Input,{value:this.state.footer||"",placeholder:this.getLsi("footerPlaceholder"),
onChange:this._changeFooterContent,key:"footerInput"},(({children:e})=>Uu5g05.Utils.Element.create(i.Bricks.Footer,{parent:this.props.component},e))):null],void 0,!0))}}),m=g}}]);