const { act } = require("../internal/testing-library.js");

let setTimeout = global.setTimeout;

// wait() or wait(100) or wait({ timeout: 100, updateWrapper: true })
async function wait(...args) {
  let timeout, updateWrapper;
  if (typeof args[0] === "number") timeout = args.shift();
  else timeout = (args[0] || {}).timeout || 0;
  ({ updateWrapper = true } = args[0] || {});

  if (timeout >= 0) {
    await act(() => new Promise((resolve) => setTimeout(resolve, timeout)), { updateWrapper });
  }
}

module.exports = { wait };
